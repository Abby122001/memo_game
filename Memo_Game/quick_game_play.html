    <!DOCTYPE html>
    <html lang="en">
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quick Game - Memory Challenge</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

    * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    body {
    background-color: #50733f;
    min-height: 100vh;
    padding: 20px;
    color: #5d2a00;
    position: relative;
    }

    .back-button {
    position: absolute;
    top: 20px;
    left: 20px;
    background: linear-gradient(145deg, #7a3b0d, #5d2a00);
    border: none;
    color: #f6c440;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    font-size: 24px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s;
    box-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    z-index: 100;
    }

    .back-button:hover {
    transform: scale(1.1);
    background: rgba(255,255,255,0.3);
    }

    .game-container {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
    background: linear-gradient(145deg, #ffd4a3, #dfb18f);
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }

    .game-header {
    text-align: center;
    margin-bottom: 30px;
    }

    .game-title {
    font-size: 2.5rem;
    color: #5d2a00;
    margin-bottom: 10px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }

    .category-display {
    font-size: 1.5rem;
    color: #7a3b0d;
    margin-bottom: 20px;
    }

    .difficulty-levels {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-bottom: 30px;
    flex-wrap: wrap;
    }

    .difficulty-btn {
        padding: 10px 20px;
        border: none;
        border-radius: 25px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        position: relative;
        overflow: visible;
        z-index: 1;
    }
    
    .difficulty-btn.active {
        transform: translateY(-3px);
        box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        border: 2px solid #fff;
        z-index: 2;
    }
    
    .difficulty-btn.active::after {
        content: 'âœ“';
        position: absolute;
        top: -8px;
        right: -8px;
        background: #4CAF50;
        color: white;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        z-index: 3;
    }
    
    .difficulty-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        position: relative;
    }
    
    .difficulty-btn:disabled.active {
        opacity: 1;
    }


    .difficulty-btn.easy { background-color: #4CAF50; color: white; }
    .difficulty-btn.medium { background-color: #FFC107; color:white; }
    .difficulty-btn.hard { background-color: #FF5722; color: white; }
    .difficulty-btn.expert { background-color: #9C27B0; color: white; }
    .difficulty-btn.brainiac { background-color: #673AB7; color: white; }

    .difficulty-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }

    .difficulty-btn:active {
    transform: translateY(1px);
    }

    .hint-display {
    background: rgba(255, 255, 255, 0.8);
    padding: 15px;
    border-radius: 10px;
    margin: 20px 0;
    font-size: 1.1rem;
    min-height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    }

    .game-board {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 15px;
    margin: 20px 0;
    }

    .card {
      aspect-ratio: 1;
      background: linear-gradient(145deg, #7a3b0d, #5d2a00);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s;
      transform-style: preserve-3d;
      position: relative;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      perspective: 1000px;
    }
    
    .card-content {
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      backface-visibility: hidden;
    }
    
    .card i {
      font-size: 2.5rem;
      color: white;
      transition: all 0.3s;
    }
    
    .card.flipped {
      transform: rotateY(180deg);
      background: white;
    }
    
    .card.flipped i {
      color: #5d2a00;
    }
    
    .card.matched {
      transform: rotateY(180deg);
      background: #4CAF50;
      pointer-events: none;
    }

    .card.flipped {
    transform: rotateY(180deg);
    background: white;
    }

    .card.matched {
    transform: rotateY(180deg);
    background: #4CAF50;
    pointer-events: none;
    }

    .card i {
    font-size: 2rem;
    color: white;
    transition: all 0.3s;
    }

    .card.flipped i {
    color: #5d2a00;
    }

    .game-stats {
        display: flex;
        justify-content: space-between;
        background: #f0e6d2;
        padding: 15px 30px;
        border-radius: 10px;
        margin: 15px 0;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        border: 1px solid #d4c4a3;
    }

    .stat {
    text-align: center;
    }

    .stat-value {
        font-size: 1.8rem;
        font-weight: 700;
        color: #7a3b0d;
        min-width: 80px;
        display: inline-block;
        text-align: center;
    }
    
    /* Instructions Modal */
    .instructions-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        z-index: 1000;
        justify-content: center;
        align-items: center;
    }
    
    .instructions-content {
        background: linear-gradient(145deg, #fff9e6, #ffe6cc);
        padding: 30px;
        border-radius: 15px;
        max-width: 500px;
        max-height: 80vh;
        overflow-y: auto;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        text-align: center;
        position: relative;
    }
    
    .instructions-content h2 {
        color: #7a3b0d;
        margin-bottom: 20px;
        font-size: 2rem;
        text-transform: capitalize;
    }
    
    .instructions-content p {
        color: #5d2a00;
        margin-bottom: 25px;
        line-height: 1.6;
        text-align: left;
    }
    
    .start-game-btn {
        background: linear-gradient(145deg, #7a3b0d, #5d2a00);
        color: #f6c440;
        border: none;
        padding: 12px 30px;
        border-radius: 30px;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        margin-top: 10px;
    }
    
    .start-game-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .stat-label {
        font-size: 1rem;
        color: #7a3b0d;
        font-weight: 600;
        margin-bottom: 5px;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    @media (max-width: 768px) {
    .game-board {
    grid-template-columns: repeat(3, 1fr);
    }

    .difficulty-btn {
        padding: 10px 20px;
        margin: 5px;
        border: none;
        border-radius: 20px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        position: relative;
        overflow: hidden;
    }
    
    .difficulty-btn.active {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        border: 2px solid #fff;
    }
    
    .difficulty-btn.active::after {
        content: 'âœ“';
        position: absolute;
        top: -8px;
        right: -8px;
        background: #4CAF50;
        color: white;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    .game-title {
    font-size: 2rem;
    }

    .category-display {
    font-size: 1.2rem;
    }
    }

    @media (max-width: 480px) {
    .game-board {
    grid-template-columns: repeat(2, 1fr);
    }

    .difficulty-levels {
    flex-direction: column;
    align-items: center;
    }

    .difficulty-btn {
    width: 80%;
    margin-bottom: 10px;
    }
    }
    </style>
    </head>
    <body>
    <button class="back-button" id="backButton">
    <i class="fas fa-arrow-left"></i>
    </button>

    <div class="game-container">
    <div class="game-header">
    <h1 class="game-title">Quick Game</h1>
    <div class="category-display" id="categoryDisplay">Category: </div>

    <div class="difficulty-levels">
    <button class="difficulty-btn easy" data-difficulty="easy" title="">Easy</button>
    <button class="difficulty-btn medium" data-difficulty="medium" title="Complete Easy to unlock" disabled>Medium</button>
    <button class="difficulty-btn hard" data-difficulty="hard" title="Complete Medium to unlock" disabled>Hard</button>
    <button class="difficulty-btn expert" data-difficulty="expert" title="Complete Hard to unlock" disabled>Expert</button>
    <button class="difficulty-btn brainiac" data-difficulty="brainiac" title="Complete Expert to unlock" disabled>Brainiac</button>
    </div>

    <div class="hint-display" id="hintDisplay">
        Match the pairs to win! Start with Easy mode!
    </div>
    </div>

    <div class="game-stats">
    <div class="stat">
    <div class="stat-label">Moves</div>
    <div class="stat-value" id="moves">0</div>
    </div>
    <div class="stat">
    <div class="stat-label">Time</div>
    <div class="stat-value" id="timer">0:00</div>
    </div>
    <div class="stat">
    <div class="stat-label">Pairs</div>
    <div class="stat-value" id="pairs">0/0</div>
    </div>
    </div>

    <div class="game-board" id="gameBoard">
    <!-- Cards will be generated here by JavaScript -->
    </div>
    </div>

    <script>
    // Game data
    const categories = {
    fruits: {
      name: 'Fruits',
      pairs: [
        { word: 'Apple', icon: 'apple-alt' },
        { word: 'Banana', icon: 'banana' },
        { word: 'Orange', icon: 'orange' },
        { word: 'Strawberry', icon: 'strawberry' },
        { word: 'Grapes', icon: 'grapes' },
        { word: 'Watermelon', icon: 'watermelon' },
        { word: 'Pineapple', icon: 'pineapple' },
        { word: 'Mango', icon: 'mango' },
        { word: 'Peach', icon: 'peach' },
        { word: 'Pear', icon: 'pear' },
        { word: 'Cherry', icon: 'cherry' },
        { word: 'Lemon', icon: 'lemon' },
        { word: 'Coconut', icon: 'coconut' },
        { word: 'Kiwi', icon: 'kiwi' },
        { word: 'Avocado', icon: 'avocado' },
        { word: 'Blueberry', icon: 'blueberry' },
        { word: 'Raspberry', icon: 'raspberry' },
        { word: 'Blackberry', icon: 'blackberry' },
        { word: 'Pomegranate', icon: 'pomegranate' },
        { word: 'Apricot', icon: 'apricot' },
        { word: 'Plum', icon: 'plum' },
        { word: 'Fig', icon: 'fig' },
        { word: 'Guava', icon: 'guava' },
        { word: 'Papaya', icon: 'papaya' },
        { word: 'Lime', icon: 'lime' },
        { word: 'Melon', icon: 'melon' },
        { word: 'Tangerine', icon: 'tangerine' },
        { word: 'Nectarine', icon: 'nectarine' },
        { word: 'Clementine', icon: 'clementine' },
        { word: 'Grapefruit', icon: 'grapefruit' },
        { word: 'Passion Fruit', icon: 'passion-fruit' },
        { word: 'Dragon Fruit', icon: 'dragon-fruit' },
        { word: 'Star Fruit', icon: 'star-fruit' },
        { word: 'Persimmon', icon: 'persimmon' },
        { word: 'Lychee', icon: 'lychee' },
        { word: 'Rambutan', icon: 'rambutan' },
        { word: 'Mangosteen', icon: 'mangosteen' },
        { word: 'Jackfruit', icon: 'jackfruit' },
        { word: 'Durian', icon: 'durian' },
        { word: 'Breadfruit', icon: 'breadfruit' },
        { word: 'Soursop', icon: 'soursop' },
        { word: 'Acerola', icon: 'acerola' },
        { word: 'Ackee', icon: 'ackee' },
        { word: 'Cranberry', icon: 'cranberry' },
        { word: 'Elderberry', icon: 'elderberry' },
        { word: 'Gooseberry', icon: 'gooseberry' },
        { word: 'Huckleberry', icon: 'huckleberry' },
        { word: 'Lingonberry', icon: 'lingonberry' },
        { word: 'Mulberry', icon: 'mulberry' },
        { word: 'Olive', icon: 'olive' },
        { word: 'Plantain', icon: 'plantain' }
      ]
    },
    countries: {
      name: 'Countries',
      pairs: [
        { word: 'Afghanistan', icon: 'globe-asia' },
        { word: 'Albania', icon: 'globe-europe' },
        { word: 'Algeria', icon: 'globe-africa' },
        { word: 'Andorra', icon: 'globe-europe' },
        { word: 'Angola', icon: 'globe-africa' },
        { word: 'Argentina', icon: 'globe-americas' },
        { word: 'Armenia', icon: 'globe-asia' },
        { word: 'Australia', icon: 'globe-oceania' },
        { word: 'Austria', icon: 'globe-europe' },
        { word: 'Azerbaijan', icon: 'globe-asia' },
        { word: 'Bahamas', icon: 'umbrella-beach' },
        { word: 'Bahrain', icon: 'globe-asia' },
        { word: 'Bangladesh', icon: 'globe-asia' },
        { word: 'Barbados', icon: 'umbrella-beach' },
        { word: 'Belarus', icon: 'globe-europe' },
        { word: 'Belgium', icon: 'globe-europe' },
        { word: 'Belize', icon: 'globe-americas' },
        { word: 'Benin', icon: 'globe-africa' },
        { word: 'Bhutan', icon: 'globe-asia' },
        { word: 'Bolivia', icon: 'globe-americas' },
        { word: 'Botswana', icon: 'globe-africa' },
        { word: 'Brazil', icon: 'globe-americas' },
        { word: 'Brunei', icon: 'globe-asia' },
        { word: 'Bulgaria', icon: 'globe-europe' },
        { word: 'Burkina Faso', icon: 'globe-africa' },
        { word: 'Burundi', icon: 'globe-africa' },
        { word: 'Cambodia', icon: 'globe-asia' },
        { word: 'Cameroon', icon: 'globe-africa' },
        { word: 'Canada', icon: 'globe-americas' },
        { word: 'Chile', icon: 'globe-americas' },
        { word: 'China', icon: 'globe-asia' },
        { word: 'Colombia', icon: 'globe-americas' },
        { word: 'Costa Rica', icon: 'globe-americas' },
        { word: 'Croatia', icon: 'globe-europe' },
        { word: 'Cuba', icon: 'umbrella-beach' },
        { word: 'Cyprus', icon: 'globe-europe' },
        { word: 'Denmark', icon: 'globe-europe' },
        { word: 'Ecuador', icon: 'globe-americas' },
        { word: 'Egypt', icon: 'globe-africa' },
        { word: 'Estonia', icon: 'globe-europe' },
        { word: 'Ethiopia', icon: 'globe-africa' },
        { word: 'Fiji', icon: 'umbrella-beach' },
        { word: 'Finland', icon: 'globe-europe' },
        { word: 'France', icon: 'globe-europe' },
        { word: 'Gabon', icon: 'globe-africa' },
        { word: 'Gambia', icon: 'globe-africa' },
        { word: 'Georgia', icon: 'globe-asia' },
        { word: 'Germany', icon: 'globe-europe' },
        { word: 'Ghana', icon: 'globe-africa' },
        { word: 'Greece', icon: 'globe-europe' },
        { word: 'Grenada', icon: 'umbrella-beach' },
        { word: 'Guatemala', icon: 'globe-americas' },
        { word: 'Guinea', icon: 'globe-africa' },
        { word: 'Guyana', icon: 'globe-americas' },
        { word: 'Haiti', icon: 'umbrella-beach' },
        { word: 'Honduras', icon: 'globe-americas' },
        { word: 'Hungary', icon: 'globe-europe' },
        { word: 'Iceland', icon: 'snowflake' },
        { word: 'India', icon: 'globe-asia' },
        { word: 'Indonesia', icon: 'globe-asia' },
        { word: 'Iran', icon: 'globe-asia' },
        { word: 'Iraq', icon: 'globe-asia' },
        { word: 'Ireland', icon: 'globe-europe' },
        { word: 'Israel', icon: 'globe-asia' },
        { word: 'Italy', icon: 'globe-europe' },
        { word: 'Jamaica', icon: 'umbrella-beach' },
        { word: 'Japan', icon: 'globe-asia' },
        { word: 'Jordan', icon: 'globe-asia' },
        { word: 'Kazakhstan', icon: 'globe-asia' },
        { word: 'Kenya', icon: 'globe-africa' },
        { word: 'Kiribati', icon: 'umbrella-beach' },
        { word: 'Kuwait', icon: 'globe-asia' },
        { word: 'Laos', icon: 'globe-asia' },
        { word: 'Latvia', icon: 'globe-europe' },
        { word: 'Lebanon', icon: 'globe-asia' },
        { word: 'Lesotho', icon: 'globe-africa' },
        { word: 'Liberia', icon: 'globe-africa' },
        { word: 'Libya', icon: 'globe-africa' },
        { word: 'Liechtenstein', icon: 'globe-europe' },
        { word: 'Lithuania', icon: 'globe-europe' },
        { word: 'Luxembourg', icon: 'globe-europe' },
        { word: 'Madagascar', icon: 'globe-africa' },
        { word: 'Malawi', icon: 'globe-africa' },
        { word: 'Malaysia', icon: 'globe-asia' },
        { word: 'Maldives', icon: 'umbrella-beach' },
        { word: 'Mali', icon: 'globe-africa' },
        { word: 'Malta', icon: 'globe-europe' },
        { word: 'Mauritania', icon: 'globe-africa' },
        { word: 'Mauritius', icon: 'umbrella-beach' },
        { word: 'Mexico', icon: 'globe-americas' },
        { word: 'Monaco', icon: 'globe-europe' },
        { word: 'Mongolia', icon: 'globe-asia' },
        { word: 'Montenegro', icon: 'globe-europe' },
        { word: 'Morocco', icon: 'globe-africa' },
        { word: 'Mozambique', icon: 'globe-africa' },
        { word: 'Myanmar', icon: 'globe-asia' },
        { word: 'Namibia', icon: 'globe-africa' },
        { word: 'Nauru', icon: 'umbrella-beach' },
        { word: 'Nepal', icon: 'mountain' },
        { word: 'Netherlands', icon: 'globe-europe' },
        { word: 'New Zealand', icon: 'globe-oceania' },
        { word: 'Nicaragua', icon: 'globe-americas' },
        { word: 'Niger', icon: 'globe-africa' },
        { word: 'Nigeria', icon: 'globe-africa' },
        { word: 'North Korea', icon: 'globe-asia' },
        { word: 'Norway', icon: 'snowflake' },
        { word: 'Oman', icon: 'globe-asia' },
        { word: 'Pakistan', icon: 'globe-asia' },
        { word: 'Palau', icon: 'umbrella-beach' },
        { word: 'Panama', icon: 'globe-americas' },
        { word: 'Paraguay', icon: 'globe-americas' },
        { word: 'Peru', icon: 'globe-americas' },
        { word: 'Philippines', icon: 'umbrella-beach' },
        { word: 'Poland', icon: 'globe-europe' },
        { word: 'Portugal', icon: 'globe-europe' },
        { word: 'Qatar', icon: 'globe-asia' },
        { word: 'Romania', icon: 'globe-europe' },
        { word: 'Russia', icon: 'globe-europe' },
        { word: 'Rwanda', icon: 'globe-africa' },
        { word: 'Samoa', icon: 'umbrella-beach' },
        { word: 'Saudi Arabia', icon: 'globe-asia' },
        { word: 'Senegal', icon: 'globe-africa' },
        { word: 'Serbia', icon: 'globe-europe' },
        { word: 'Seychelles', icon: 'umbrella-beach' },
        { word: 'Singapore', icon: 'globe-asia' },
        { word: 'Slovakia', icon: 'globe-europe' },
        { word: 'Slovenia', icon: 'globe-europe' },
        { word: 'Somalia', icon: 'globe-africa' },
        { word: 'South Africa', icon: 'globe-africa' },
        { word: 'South Korea', icon: 'globe-asia' },
        { word: 'Spain', icon: 'globe-europe' },
        { word: 'Sri Lanka', icon: 'umbrella-beach' },
        { word: 'Sudan', icon: 'globe-africa' },
        { word: 'Sweden', icon: 'globe-europe' },
        { word: 'Switzerland', icon: 'mountain' },
        { word: 'Syria', icon: 'globe-asia' },
        { word: 'Taiwan', icon: 'globe-asia' },
        { word: 'Tajikistan', icon: 'globe-asia' },
        { word: 'Tanzania', icon: 'globe-africa' },
        { word: 'Thailand', icon: 'globe-asia' },
        { word: 'Togo', icon: 'globe-africa' },
        { word: 'Tonga', icon: 'umbrella-beach' },
        { word: 'Tunisia', icon: 'globe-africa' },
        { word: 'Turkey', icon: 'globe-asia' },
        { word: 'Turkmenistan', icon: 'globe-asia' },
        { word: 'Tuvalu', icon: 'umbrella-beach' },
        { word: 'Uganda', icon: 'globe-africa' },
        { word: 'Ukraine', icon: 'globe-europe' },
        { word: 'UAE', icon: 'globe-asia' },
        { word: 'UK', icon: 'globe-europe' },
        { word: 'USA', icon: 'globe-americas' },
        { word: 'Uruguay', icon: 'globe-americas' },
        { word: 'Uzbekistan', icon: 'globe-asia' },
        { word: 'Vanuatu', icon: 'umbrella-beach' },
        { word: 'Venezuela', icon: 'globe-americas' },
        { word: 'Vietnam', icon: 'globe-asia' },
        { word: 'Yemen', icon: 'globe-asia' },
        { word: 'Zambia', icon: 'globe-africa' },
        { word: 'Zimbabwe', icon: 'globe-africa' }
      ]
    },
    animals: {
      name: 'Animals',
      pairs: [
        // Base set (12 pairs)
        { word: 'Dog', icon: 'dog' },
        { word: 'Cat', icon: 'cat' },
        { word: 'Hippo', icon: 'hippo' },
        { word: 'Fish', icon: 'fish' },
        { word: 'Frog', icon: 'frog' },
        { word: 'Bird', icon: 'kiwi-bird' },
        { word: 'Otter', icon: 'otter' },
        { word: 'Dove', icon: 'dove' },
        { word: 'Horse', icon: 'horse' },
        { word: 'Spider', icon: 'spider' },
        { word: 'Dragon', icon: 'dragon' },
        { word: 'Feather', icon: 'feather-alt' },
        
        // Additional pairs for higher difficulties (8 more pairs)
        { word: 'Paw', icon: 'paw' },
        { word: 'Crow', icon: 'crow' },
        { word: 'Dragon', icon: 'dragon' },
        { word: 'Egg', icon: 'egg' },
        { word: 'Feather', icon: 'feather' },
        { word: 'Horse Head', icon: 'horse-head' },
        { word: 'Paw Claws', icon: 'paw-claws' },
        { word: 'Spider Web', icon: 'spider-web' },
        
        // Expert level additions (8 more pairs)
        { word: 'Bone', icon: 'bone' },
        { word: 'Frog', icon: 'frog' },
        { word: 'Hippo', icon: 'hippo' },
        { word: 'Horse', icon: 'horse' },
        { word: 'Otter', icon: 'otter' },
        { word: 'Paw', icon: 'paw' },
        { word: 'Spider', icon: 'spider' },
        { word: 'Dove', icon: 'dove' },
        
        // Brainiac level additions (8 more pairs)
        { word: 'Crow', icon: 'crow' },
        { word: 'Dragon', icon: 'dragon' },
        { word: 'Egg', icon: 'egg' },
        { word: 'Feather', icon: 'feather' },
        { word: 'Horse Head', icon: 'horse-head' },
        { word: 'Paw Claws', icon: 'paw-claws' },
        { word: 'Spider Web', icon: 'spider-web' },
        { word: 'Bone', icon: 'bone' }
      ]
    },
    icons: {
      name: 'Icons',
      pairs: [
        // Base set
        { word: 'Heart', icon: 'heart' },
        { word: 'Star', icon: 'star' },
        { word: 'Bell', icon: 'bell' },
        { word: 'Envelope', icon: 'envelope' },
        { word: 'Camera', icon: 'camera' },
        { word: 'Music', icon: 'music' },
        { word: 'Gift', icon: 'gift' },
        { word: 'Key', icon: 'key' },
        { word: 'Home', icon: 'home' },
        { word: 'Flag', icon: 'flag' },
        { word: 'Bookmark', icon: 'bookmark' },
        { word: 'Cloud', icon: 'cloud' }
      ]
    },
    fruits: {
      name: 'Fruits and Vegetables',
      pairs: [
        { word: 'Apple', icon: 'apple-alt' },
        { word: 'Lemon', icon: 'lemon' },
        { word: 'Pepper', icon: 'pepper-hot' },
        { word: 'Carrot', icon: 'carrot' },
        { word: 'Orange', icon: 'apple-whole' },
        { word: 'Lime', icon: 'lemon' },
        { word: 'Chili', icon: 'pepper-hot' },
        { word: 'Carrot', icon: 'carrot' },
        { word: 'Pear', icon: 'apple-alt' },
        { word: 'Lime', icon: 'lemon' },
        { word: 'JalapeÃ±o', icon: 'pepper-hot' },
        { word: 'Carrot', icon: 'carrot' }
      ]
    },
    vehicles: {
      name: 'Vehicles',
      pairs: [
        { word: 'Car', icon: 'car' },
        { word: 'Truck', icon: 'truck' },
        { word: 'Motorcycle', icon: 'motorcycle' },
        { word: 'Bicycle', icon: 'bicycle' },
        { word: 'Bus', icon: 'bus' },
        { word: 'Train', icon: 'train' },
        { word: 'Plane', icon: 'plane' },
        { word: 'Ship', icon: 'ship' },
        { word: 'Helicopter', icon: 'helicopter' },
        { word: 'Monster Truck', icon: 'truck-monster' },
        { word: 'Pickup Truck', icon: 'truck-pickup' },
        { word: 'Tram', icon: 'tram' }
      ]
    }
    };

    // Game state
    let gameState = {
        category: '',
        difficulty: '',
        cards: [],
        flippedCards: [],
        matchedPairs: 0,
        moves: 0,
        timer: 0,
        timeLeft: 180, // Default 3 minutes
        timeLimit: 180, // Default time limit in seconds
        timerInterval: null,
        canFlip: false,
        totalPairs: 0,
        unlockedDifficulties: ['easy'] // Start with easy unlocked
    };

    // Load unlocked difficulties from localStorage
    function loadUnlockedDifficulties() {
    const savedDifficulties = localStorage.getItem('unlockedDifficulties');
    if (savedDifficulties) {
        gameState.unlockedDifficulties = JSON.parse(savedDifficulties);
    }
    updateDifficultyButtons();
    }

    // Save unlocked difficulties to localStorage
    function saveUnlockedDifficulties() {
    localStorage.setItem('unlockedDifficulties', JSON.stringify(gameState.unlockedDifficulties));
    updateDifficultyButtons();
    }

    // Update difficulty buttons based on unlocked difficulties
    function updateDifficultyButtons() {
        const difficulties = ['easy', 'medium', 'hard', 'expert', 'brainiac'];
        const difficultyNames = {
            'easy': 'Easy',
            'medium': 'Medium',
            'hard': 'Hard',
            'expert': 'Expert',
            'brainiac': 'Brainiac'
        };
        
        difficulties.forEach(difficulty => {
            const button = document.querySelector(`.difficulty-btn.${difficulty}`);
            if (!button) return;
            
            if (gameState.unlockedDifficulties.includes(difficulty)) {
                button.disabled = false;
                button.title = `Play ${difficultyNames[difficulty]} Mode`;
                button.style.opacity = '1';
                button.style.cursor = 'pointer';
                button.innerHTML = difficultyNames[difficulty];
            } else {
                const prevDifficulty = difficulties[difficulties.indexOf(difficulty) - 1];
                const prevName = prevDifficulty ? difficultyNames[prevDifficulty] + ' Mode' : 'the first level';
                
                button.disabled = true;
                button.title = `Complete ${prevName} to unlock`;
                button.style.opacity = '0.5';
                button.style.cursor = 'not-allowed';
                button.innerHTML = `${difficultyNames[difficulty]} <span class="lock-icon">ðŸ”’</span>`;
            }
        });
    }

    // DOM elements
    const gameBoard = document.getElementById('gameBoard');
    const categoryDisplay = document.getElementById('categoryDisplay');
    const hintDisplay = document.getElementById('hintDisplay');
    const movesDisplay = document.getElementById('moves');
    const timerDisplay = document.getElementById('timer');
    const pairsDisplay = document.getElementById('pairs');
    const difficultyButtons = document.querySelectorAll('.difficulty-btn');
    const backButton = document.getElementById('backButton');

    // Initialize the game
    function initGame() {
        // Load unlocked difficulties
        loadUnlockedDifficulties();
        
        // Get category from URL
        const urlParams = new URLSearchParams(window.location.search);
        const category = urlParams.get('category') || 'animals';

        if (!categories[category]) {
            alert('Invalid category selected. Redirecting to Animals.');
            window.location.href = 'quick_game.html';
            return;
        }

        gameState.category = category;
        categoryDisplay.textContent = `Category: ${categories[category].name}`;

        // Add event listeners to difficulty buttons
        document.querySelectorAll('.difficulty-btn').forEach(button => {
            button.addEventListener('click', handleDifficultySelect);
            
            // Handle difficulty selection
            function handleDifficultySelect(e) {
                const difficulty = e.target.dataset.difficulty;
                
                // Only proceed if the difficulty is unlocked
                if (!gameState.unlockedDifficulties.includes(difficulty)) {
                    hintDisplay.textContent = `Complete the previous difficulty to unlock ${difficulty.charAt(0).toUpperCase() + difficulty.slice(1)} mode`;
                    return;
                }
                
                // Update active state for difficulty buttons
                document.querySelectorAll('.difficulty-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                e.target.classList.add('active');
                
                gameState.difficulty = difficulty;
                
                // Get category name in lowercase for display
            const categoryName = gameState.category || 'animals';
            const displayCategory = categoryName.charAt(0).toUpperCase() + categoryName.slice(1);
            
            // Update hint message based on difficulty and category
            const hints = {
                'easy': `Match the ${displayCategory} with their pairs! Start with Easy mode!`,
                'medium': `Can you match all ${displayCategory} in Medium mode? The clock is ticking!`,
                'hard': `Test your ${displayCategory} memory! How fast can you complete Hard mode?`,
                'expert': `Expert ${displayCategory} matching - only for the sharpest minds!`,
                'brainiac': `Think you know ${displayCategory}? Prove it in Brainiac mode!`
            };
            hintDisplay.textContent = hints[difficulty] || hints['easy'];
                
                // Set game parameters based on difficulty
                const gameParams = {
                    easy: {
                        pairs: 6,  // 6 pairs (12 cards)
                        timeLimit: 180, // 3 minutes
                        instructions: "Welcome to Easy mode! Your goal is to match all the cards as fast as you can. Don't worry about tricky patternsâ€”just focus on remembering where each card is. You have a limited time, so work steadily and enjoy learning the game mechanics. Good luck!"
                    },
                    medium: {
                        pairs: 10,  // 10 pairs (20 cards)
                        timeLimit: 150, // 2.5 minutes
                        instructions: "Welcome to Medium mode! You'll need to be quick and observant to match all the cards in time. Pay attention to the details and try to remember where you've seen each card. The clock is tickingâ€”can you beat it?"
                    },
                    hard: {
                        pairs: 14,  // 14 pairs (28 cards)
                        timeLimit: 120, // 2 minutes
                        instructions: "Hard mode is here! The board is bigger and the matches are trickier. You'll need sharp eyes and a good memory to match all the cards before time runs out. Stay focused and don't let the pressure get to you!"
                    },
                    expert: {
                        pairs: 18,  // 18 pairs (36 cards)
                        timeLimit: 90, // 1.5 minutes
                        instructions: "Expert mode isn't for the faint of heart! The cards are many, the patterns are tricky, and the time is limited. You'll need sharp observation, fast reflexes, and a strong memory to match all the cards. Only the fastest and smartest players will succeed here!"
                    },
                    brainiac: {
                        pairs: 24,  // 24 pairs (48 cards)
                        timeLimit: 60, // 1 minute
                        instructions: "Brainiac mode is the ultimate challenge! The board is huge, the time is tight, and the matches are extremely tricky. You'll need full concentration, strategy, and an excellent memory to succeed. Only true masters can finish this level. Are you ready to test your brain to the max?"
                    }
                }[difficulty];
                
                // Show instructions before starting the game
                showInstructions(difficulty, gameParams.instructions, () => {
                    // Set game parameters
                    const { pairs, timeLimit } = gameParams;
                    gameState.timeLimit = timeLimit;
                    gameState.totalPairs = pairs;
                    
                    // Update UI
                    document.querySelectorAll('.difficulty-btn').forEach(btn => btn.classList.remove('active'));
                    e.target.classList.add('active');
                    
                    // Start the game
                    startGame(pairs);
                });
                
                // Set time limit for the game
                gameState.timeLimit = timeLimit;
                
                gameState.totalPairs = pairs;
                
                // Update UI
                document.querySelectorAll('.difficulty-btn').forEach(btn => btn.classList.remove('active'));
                e.target.classList.add('active');
                
                // Start the game
                startGame(pairs);
            }
        });

        // Add event listener to back button
        document.getElementById('backButton').addEventListener('click', () => {
            window.location.href = 'index.html';
        });

        // Initialize stats display
        updateStats();
    }

    // Get difficulty-specific settings with enhanced card designs
    function getDifficultySettings(difficulty) {
        const settings = {
            easy: {
                cardBack: 'linear-gradient(145deg, #ffeb99, #ffcc80)',
                cardFront: '#fff3e0',
                border: '3px solid #ffb74d',
                fontSize: '1.5rem',
                flipSpeed: 1000,
                flipBackTime: 2000,
                gridColumns: 'repeat(4, 1fr)',
                emojiSize: '2.5rem',
                cardClass: 'card-easy',
                pattern: 'none',
                hoverEffect: 'scale(1.05)'
            },
            medium: {
                cardBack: 'linear-gradient(145deg, #80cbc4, #4db6ac)',
                cardFront: '#e0f2f1',
                border: '2px solid #4db6ac',
                fontSize: '1.3rem',
                flipSpeed: 800,
                flipBackTime: 1500,
                gridColumns: 'repeat(5, 1fr)',
                emojiSize: '2.2rem',
                cardClass: 'card-medium',
                pattern: 'diagonal-stripes',
                hoverEffect: 'rotate(2deg)'
            },
            hard: {
                cardBack: 'linear-gradient(145deg, #7986cb, #5c6bc0)',
                cardFront: '#e8eaf6',
                border: '1px solid #5c6bc0',
                fontSize: '1.1rem',
                flipSpeed: 600,
                flipBackTime: 1000,
                gridColumns: 'repeat(6, 1fr)',
                emojiSize: '2rem',
                cardClass: 'card-hard',
                pattern: 'grid',
                hoverEffect: 'skewX(-2deg)'
            },
            expert: {
                cardBack: 'linear-gradient(145deg, #ba68c8, #9c27b0)',
                cardFront: '#f3e5f5',
                border: '1px solid #9c27b0',
                fontSize: '1rem',
                flipSpeed: 400,
                flipBackTime: 800,
                gridColumns: 'repeat(7, 1fr)',
                emojiSize: '1.8rem',
                cardClass: 'card-expert',
                pattern: 'zigzag',
                hoverEffect: 'perspective(1000px) rotateX(5deg)'
            },
            brainiac: {
                cardBack: 'linear-gradient(145deg, #ff8a65, #ff7043)',
                cardFront: '#fbe9e7',
                border: '1px solid #ff7043',
                fontSize: '0.9rem',
                flipSpeed: 200,
                flipBackTime: 500,
                gridColumns: 'repeat(8, 1fr)',
                emojiSize: '1.5rem',
                cardClass: 'card-brainiac',
                pattern: 'circuit',
                hoverEffect: 'perspective(1000px) rotateY(5deg)',
                specialEffect: 'pulse'
            }
        };
        return settings[difficulty] || settings.easy;
    }

    // Start the game with specified number of pairs
    function startGame(pairs) {
        // Reset game state
        gameState.cards = [];
        gameState.flippedCards = [];
        gameState.matchedPairs = 0;
        gameState.moves = 0;
        gameState.timer = 0;
        gameState.timeLeft = gameState.timeLimit || 180;
        gameState.canFlip = true;
        gameState.difficultySettings = getDifficultySettings(gameState.difficulty);

        // Clear previous game
        clearInterval(gameState.timerInterval);
        gameBoard.innerHTML = '';
        
        // Set grid layout based on difficulty
        gameBoard.style.gridTemplateColumns = gameState.difficultySettings.gridColumns;

    // Update UI
    updateStats();

    // Create card pairs
    const categoryData = categories[gameState.category];
    const selectedIcons = [];
    const selectedHints = [];

    // Randomly select pairs
    const selectedPairs = [];
    const availablePairs = [...categoryData.pairs];
    
    while (selectedPairs.length < pairs && availablePairs.length > 0) {
      const randomIndex = Math.floor(Math.random() * availablePairs.length);
      selectedPairs.push(availablePairs[randomIndex]);
      availablePairs.splice(randomIndex, 1);
    }

    // Create cards (1 word and 1 icon for each pair)
    const cards = [];
    selectedPairs.forEach((pair, index) => {
      // Add word card
      cards.push({ 
        type: 'word', 
        content: pair.word, 
        pairId: index,
        id: index * 2 
      });
      // Add icon card
      cards.push({ 
        type: 'icon', 
        content: pair.icon, 
        pairId: index,
        id: index * 2 + 1 
      });
    });

    // Shuffle cards
    gameState.cards = shuffleArray(cards);

    // Render cards
    renderCards();

    // Start timer
    startTimer();
    }

    // Render cards on the board with enhanced designs
    function renderCards() {
        gameBoard.innerHTML = '';
        const settings = gameState.difficultySettings;
        
        // Add dynamic styles for card patterns
        const style = document.createElement('style');
        style.id = 'card-styles';
        style.textContent = `
            .card {
                position: relative;
                aspect-ratio: 1;
                perspective: 1000px;
                cursor: pointer;
                transform-style: preserve-3d;
                transition: transform 0.5s ease, box-shadow 0.3s ease;
                border-radius: 10px;
                background: transparent;
                border: none;
                outline: none;
            }
            
            .card:hover {
                transform: ${settings.hoverEffect || 'scale(1.05)'};
                box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            }
            
            .card.flipped {
                transform: rotateY(180deg);
            }
            
            .card.matched {
                opacity: 0.7;
                transform: scale(0.95);
                cursor: default;
                animation: ${settings.specialEffect || 'none'} 1.5s infinite;
            }
            
            .card-front, .card-back {
                position: absolute;
                width: 100%;
                height: 100%;
                backface-visibility: hidden;
                display: flex;
                justify-content: center;
                align-items: center;
                border-radius: 8px;
                padding: 10px;
                box-sizing: border-box;
                transition: all 0.3s ease;
            }
            
            .card-front {
                background: ${settings.cardFront};
                border: ${settings.border};
                transform: rotateY(180deg);
            }
            
            .card-back {
                background: ${settings.cardBack};
                border: ${settings.border};
                display: flex;
                justify-content: center;
                align-items: center;
                font-size: 2rem;
                color: rgba(0,0,0,0.6);
            }
            
            .card-content {
                text-align: center;
                font-size: ${settings.fontSize};
                font-weight: bold;
                color: #333;
                width: 100%;
                height: 100%;
                display: flex;
                justify-content: center;
                align-items: center;
                transition: transform 0.3s ease;
            }
            
            .card i {
                font-size: ${settings.emojiSize};
                transition: transform 0.3s ease;
            }
            
            .card:hover i {
                transform: scale(1.2);
            }
            
            /* Card patterns */
            .card-back::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                opacity: 0.1;
                ${getPatternCSS(settings.pattern)}
            }
            
            /* Animations */
            @keyframes pulse {
                0% { transform: scale(0.95); opacity: 0.7; }
                50% { transform: scale(1); opacity: 0.9; }
                100% { transform: scale(0.95); opacity: 0.7; }
            }
            
            @keyframes float {
                0% { transform: translateY(0px); }
                50% { transform: translateY(-10px); }
                100% { transform: translateY(0px); }
            }
        `;
        document.head.appendChild(style);

        // Render each card
        gameState.cards.forEach((card, index) => {
            const cardElement = document.createElement('div');
            cardElement.className = `card ${settings.cardClass}`;
            if (card.matched) cardElement.classList.add('matched');
            if (card.flipped) cardElement.classList.add('flipped');

            // Create card content
            const frontFace = document.createElement('div');
            frontFace.className = 'card-front';
            
            const backFace = document.createElement('div');
            backFace.className = 'card-back';
            
            const contentElement = document.createElement('div');
            contentElement.className = 'card-content';

            if (card.type === 'word') {
                contentElement.textContent = card.content;
            } else {
                const iconElement = document.createElement('i');
                iconElement.className = `fas fa-${card.content}`;
                contentElement.appendChild(iconElement);
                
                // Add rotation for higher difficulties
                if (gameState.difficulty === 'expert' || gameState.difficulty === 'brainiac') {
                    const rotation = Math.floor(Math.random() * 60) - 30;
                    iconElement.style.transform = `rotate(${rotation}deg)`;
                }
            }

            frontFace.appendChild(contentElement);
            
            // Add pattern to card back based on difficulty
            const patternElement = document.createElement('div');
            patternElement.className = 'card-pattern';
            backFace.appendChild(patternElement);
            
            // Add difficulty indicator to card back
            const diffIndicator = document.createElement('div');
            diffIndicator.className = 'difficulty-indicator';
            diffIndicator.textContent = gameState.difficulty.charAt(0).toUpperCase();
            backFace.appendChild(diffIndicator);

            cardElement.appendChild(backFace);
            cardElement.appendChild(frontFace);
            cardElement.dataset.index = index;

            if (!card.matched) {
                cardElement.addEventListener('click', handleCardClick);
            }

            gameBoard.appendChild(cardElement);
        });
    }
    
    // Helper function to generate CSS for different patterns
    function getPatternCSS(pattern) {
        switch(pattern) {
            case 'diagonal-stripes':
                return `
                    background: repeating-linear-gradient(
                        45deg,
                        rgba(0,0,0,0.1),
                        rgba(0,0,0,0.1) 10px,
                        rgba(0,0,0,0.2) 10px,
                        rgba(0,0,0,0.2) 20px
                    );
                `;
            case 'grid':
                return `
                    background-image: 
                        linear-gradient(rgba(0,0,0,0.1) 1px, transparent 1px),
                        linear-gradient(90deg, rgba(0,0,0,0.1) 1px, transparent 1px);
                    background-size: 20px 20px;
                `;
            case 'zigzag':
                return `
                    background: linear-gradient(135deg, rgba(0,0,0,0.1) 25%, transparent 25%) -10px 0,
                              linear-gradient(225deg, rgba(0,0,0,0.1) 25%, transparent 25%) -10px 0,
                              linear-gradient(315deg, rgba(0,0,0,0.1) 25%, transparent 25%),
                              linear-gradient(45deg, rgba(0,0,0,0.1) 25%, transparent 25%);
                    background-size: 20px 20px;
                `;
            case 'circuit':
                return `
                    background: 
                        radial-gradient(circle at 10px 10px, rgba(0,0,0,0.1) 2px, transparent 2px) 0 0 / 20px 20px,
                        linear-gradient(90deg, rgba(0,0,0,0.1) 1px, transparent 1px) 0 0 / 20px 20px,
                        linear-gradient(rgba(0,0,0,0.1) 1px, transparent 1px) 0 0 / 20px 20px;
                `;
            default:
                return 'background: none;';
        }
    }

    // Handle card click
    function handleCardClick(e) {
    if (!gameState.canFlip) return;

    const cardElement = e.currentTarget;
    const index = parseInt(cardElement.dataset.index);
    const card = gameState.cards[index];

    // Don't allow flipping already flipped or matched cards
    if (card.flipped || card.matched) return;

    // Flip the card
    cardElement.classList.add('flipped');
    card.flipped = true;
    gameState.flippedCards.push({ index, element: cardElement });

    // Show hint for the first card
    if (gameState.flippedCards.length === 1) {
    hintDisplay.textContent = `Hint: ${card.hint}`;
    }

    // Check for match if two cards are flipped
    if (gameState.flippedCards.length === 2) {
      gameState.moves++;
      updateStats();

      const firstCard = gameState.cards[gameState.flippedCards[0].index];
      const secondCard = gameState.cards[gameState.flippedCards[1].index];

      // Check if the two flipped cards are a matching pair (one word and one icon with same pairId)
      if (firstCard.pairId === secondCard.pairId && 
          ((firstCard.type === 'word' && secondCard.type === 'icon') || 
           (firstCard.type === 'icon' && secondCard.type === 'word'))) {
    // Match found
    firstCard.matched = true;
    secondCard.matched = true;

    gameState.matchedPairs++;
    updateStats();

    // Mark cards as matched
    gameState.flippedCards.forEach(card => {
    card.element.classList.add('matched');
    });

    // Clear flipped cards
    gameState.flippedCards = [];

    // Check for win
    if (gameState.matchedPairs === gameState.totalPairs) {
    endGame();
    }
    } else {
    // No match
    gameState.canFlip = false;

    // Flip cards back after delay
    setTimeout(() => {
    gameState.flippedCards.forEach(card => {
    const cardElement = card.element;
    const cardIndex = card.index;

    gameState.cards[cardIndex].flipped = false;
    cardElement.classList.remove('flipped');
    });

    gameState.flippedCards = [];
    gameState.canFlip = true;

    // Clear hint
    hintDisplay.textContent = 'Try to find a matching pair!';
    }, 1000);
    }
    }
    }

    // Update game stats
    function updateStats() {
        movesDisplay.textContent = gameState.moves;
        const timeLeft = gameState.timeLeft !== undefined ? gameState.timeLeft : (gameState.timeLimit - gameState.timer);
        timerDisplay.textContent = formatTime(timeLeft);
        pairsDisplay.textContent = `${gameState.matchedPairs} / ${gameState.totalPairs}`;
        
        // Flash red when time is running low (last 10 seconds)
        if (timeLeft <= 10) {
            timerDisplay.style.color = 'red';
            timerDisplay.style.animation = gameState.difficulty === 'brainiac' ? 'pulse 0.5s infinite' : 'none';
        } else {
            timerDisplay.style.color = '';
            timerDisplay.style.animation = '';
        }
        
        // Check for time out
        if (timeLeft <= 0) {
            endGame();
        }
    }

    // Start the game timer
    function startTimer() {
        clearInterval(gameState.timerInterval);
        gameState.timer = 0;
        gameState.startTime = Date.now();
        updateStats();

        gameState.timerInterval = setInterval(() => {
            gameState.timer++;
            if (gameState.timeLeft !== undefined) {
                gameState.timeLeft = Math.max(0, gameState.timeLimit - gameState.timer);
            }
            updateStats();
            
            // Check for time out
            if (gameState.timeLeft === 0) {
                clearInterval(gameState.timerInterval);
                endGame();
            }
        }, 1000);
    }

    // End the game
    function endGame() {
      clearInterval(gameState.timerInterval);

      // Calculate score
      const score = calculateScore();
      const timeTaken = formatTime(gameState.timer);
      
      // Determine level completed and unlock next difficulty
      let levelName = '';
      let nextDifficulty = '';
      switch(gameState.difficulty) {
        case 'easy': 
          levelName = 'Easy';
          nextDifficulty = 'medium';
          break;
        case 'medium': 
          levelName = 'Medium';
          nextDifficulty = 'hard';
          break;
        case 'hard': 
          levelName = 'Hard';
          nextDifficulty = 'expert';
          break;
        case 'expert': 
          levelName = 'Expert';
          nextDifficulty = 'brainiac';
          break;
        case 'brainiac':
          levelName = 'Brainiac';
          break;
      }
      
        // Unlock next difficulty if this one was completed
      if (nextDifficulty && !gameState.unlockedDifficulties.includes(nextDifficulty)) {
        gameState.unlockedDifficulties.push(nextDifficulty);
        saveUnlockedDifficulties();
        
        // Show unlock message
        const unlockMessage = document.createElement('div');
        unlockMessage.className = 'unlock-message';
        unlockMessage.innerHTML = `ðŸŽ‰ ${nextDifficulty.charAt(0).toUpperCase() + nextDifficulty.slice(1)} Mode Unlocked!`;
        document.querySelector('.game-container').appendChild(unlockMessage);
        
        // Remove the message after 3 seconds
        setTimeout(() => {
            unlockMessage.remove();
        }, 3000);
      }

      // Show win message with level completion
      hintDisplay.innerHTML = `
        <div class="win-message">
          <h3>Level Complete! ðŸŽ‰</h3>
          <p>Congratulations! You've completed the ${levelName} level!</p>
          <div class="win-stats">
            <p>Time: ${timeTaken}</p>
            <p>Moves: ${gameState.moves}</p>
            <p>Score: ${score}</p>
          </div>
          <button id="playAgainBtn" class="play-again-btn">
            Play Again
          </button>
        </div>
      `;
      
      // Add some styles for the win message
      const style = document.createElement('style');
      style.textContent = `
        .win-message {
          text-align: center;
          padding: 20px;
        }
        .win-message h3 {
          color: #2E7D32;
          margin-bottom: 15px;
          font-size: 1.8rem;
        }
        .win-stats {
          background: rgba(255,255,255,0.9);
          border-radius: 10px;
          padding: 15px;
          margin: 15px 0;
          box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .win-stats p {
          margin: 8px 0;
          font-size: 1.1rem;
        }
        .play-again-btn {
          margin-top: 15px;
          padding: 12px 30px;
          background: #4CAF50;
          color: white;
          border: none;
          border-radius: 25px;
          font-size: 1.1rem;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s;
          box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .play-again-btn:hover {
          background: #43A047;
          transform: translateY(-2px);
          box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }
        .play-again-btn:active {
          transform: translateY(1px);
        }
      `;
      document.head.appendChild(style);

    // Add event listener to play again button
    document.getElementById('playAgainBtn').addEventListener('click', () => {
    startGame(gameState.totalPairs);
    });
    }

    // Calculate score based on time and moves
    function calculateScore() {
    const timeBonus = Math.max(0, 1000 - (gameState.timer * 2));
    const movesBonus = Math.max(0, 500 - (gameState.moves * 5));
    return timeBonus + movesBonus;
    }

    // Format time as MM:SS
    function formatTime(seconds) {
    const mins = Math.floor(seconds / 60);
    const secs = seconds % 60;
    return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
    }

    // Utility function to shuffle an array
    function shuffleArray(array) {
    const newArray = [...array];
    for (let i = newArray.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
    }
    return newArray;
    }

    // Show instructions modal
    function showInstructions(difficulty, instructions, onStart) {
        const modal = document.createElement('div');
        modal.className = 'instructions-modal';
        modal.style.display = 'flex';
        
        modal.innerHTML = `
            <div class="instructions-content">
                <h2>${difficulty.charAt(0).toUpperCase() + difficulty.slice(1)} Mode</h2>
                <p>${instructions}</p>
                <button class="start-game-btn">Start Game</button>
            </div>
        `;
        
        // Add event listener to start button
        modal.querySelector('.start-game-btn').addEventListener('click', () => {
            document.body.removeChild(modal);
            onStart();
        });
        
        document.body.appendChild(modal);
    }

    // Initialize the game when the page loads
    document.addEventListener('DOMContentLoaded', () => {
        loadUnlockedDifficulties();
        initGame();
        
        // Add instructions modal to the DOM
        const modal = document.createElement('div');
        modal.className = 'instructions-modal';
        document.body.appendChild(modal);
    });
    </script>
    </body>
    </html>
